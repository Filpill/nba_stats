## Network To Commicate Between Containers
docker network create pgnetwork


## Postgres Database Container
winpty docker run -it \
    -e POSTGRES_USER="root" \
    -e POSTGRES_PASSWORD="root" \
    -e POSTGRES_DB="nba" \
    -v /c:/Users/Filip/Documents/Filip/Pywork/nba_stats/docker_sql/nba_postgres_data:/var/lib/postgresql/data \
    -p 5432:5432 \
    --network=pgnetwork \
    --name pgdatabase \
    postgres:13
    
## PGAdmin Container - Connect via localhost:8080/browser/
winpty docker run -it \
    -e PGADMIN_DEFAULT_EMAIL="admin@admin.com" \
    -e PGADMIN_DEFAULT_PASSWORD="root" \
    -p 8080:80 \
    --network=pgnetwork \
    --name pgadmin \
    dpage/pgadmin4

## Passing Database Arguments to Ingestion Script
python data_ingestion.py \
    --user=root \
    --password=root \
    --host=localhost \
    --port=5432 \
    --db=nba \

## Build Dockerfile 
    ## Containing Relevant Python Modules
    ## Named nba_ingest and Tagged v001
winpty docker build -t nba_ingest:v001 .

## Run Docker Image Containing Python Ingestion Script
winpty docker run -it \
    --name=pyingest \
    --network=docker_sql_default \
    nba_ingest:v001 \
	--user=root \
	--password=root \
	--host=pgdatabase \
	--port=5432 \
	--db=nba \

## pgcli - build
winpty docker pull dencold/pgcli
winpty docker run -it --rm dencold/pgcli postgresql://root:root@docker_sql_default:5432/nba
winpty docker run -it --link my-postgres:postgres --rm dencold/pgcli

postgresql://root:root@localhost:5432/nba
